<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes Viewer</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/colors.css">
    <script src="js/predefined/marked.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <!-- MathJax with configuration -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,  // Allow escaping special characters
            },
            svg: {
                fontCache: 'global'
            }
        };
    </script>
    <script src="js/predefined/latex.js"></script>
</head>
<body>
    <div id="content"></div>

    <script>
        // Function to escape special characters
        function escapeHtml(text) {
            return text.replace(/&/g, "&amp;")
                       .replace(/</g, "&lt;")
                       .replace(/>/g, "&gt;")
                       .replace(/"/g, "&quot;")
                       .replace(/'/g, "&#039;");
        }

        // Function to fetch and render the markdown file
        async function loadMarkdown() {
            try {
                const response = await fetch('notes/sample.md');
                let markdown = await response.text();
                markdown = escapeHtml(markdown);  // Escape special characters
                const htmlContent = marked.parse(markdown);  // Convert Markdown to HTML
                document.getElementById('content').innerHTML = htmlContent;
                MathJax.typesetPromise();  // Render LaTeX after the content is loaded
            } catch (error) {
                console.error('Error loading markdown:', error);
            }
        }

        // Load the markdown on page load
        window.onload = loadMarkdown;
    </script>
</body>
</html>
